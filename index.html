<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jogo Labirinto estilo Friv</title>
<style>
  body {
    background: #222;
    margin: 0; 
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    user-select: none;
    font-family: Arial, sans-serif;
  }
  #game {
    position: relative;
    width: 400px;
    height: 400px;
    background: #eee;
    border: 5px solid #444;
  }
  .wall {
    position: absolute;
    background: #333;
  }
  #player {
    position: absolute;
    width: 30px;
    height: 30px;
    background: #3498db;
    border-radius: 6px;
    transition: left 0.1s, top 0.1s;
  }
  #exit {
    position: absolute;
    width: 30px;
    height: 30px;
    background: #2ecc71;
    border-radius: 6px;
  }
  #message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2em;
    color: #27ae60;
    display: none;
  }
</style>
</head>
<body>
  <div id="game" tabindex="0">
    <div id="player"></div>
    <div id="exit"></div>
    <div id="message">Você Venceu!</div>
  </div>

<script>
  const game = document.getElementById('game');
  const player = document.getElementById('player');
  const exit = document.getElementById('exit');
  const message = document.getElementById('message');

  const size = 30; // tamanho do player e bloco (px)
  const step = size; // movimento em passos de 30px

  // Posições iniciais
  let playerPos = {x: 0, y: 0};
  const exitPos = {x: 370, y: 370}; // perto do canto inferior direito

  // Definição das paredes (x, y, largura, altura)
  const wallsData = [
    {x: 0, y: 0, width: 400, height: 10},   // topo
    {x: 0, y: 390, width: 400, height: 10}, // base
    {x: 0, y: 0, width: 10, height: 400},   // esquerda
    {x: 390, y: 0, width: 10, height: 400}, // direita

    // paredes internas
    {x: 60, y: 0, width: 10, height: 300},
    {x: 120, y: 100, width: 200, height: 10},
    {x: 320, y: 100, width: 10, height: 300},
    {x: 180, y: 200, width: 10, height: 200},
    {x: 240, y: 0, width: 10, height: 200},
    {x: 240, y: 300, width: 80, height: 10},
  ];

  // Cria paredes no DOM
  wallsData.forEach(w => {
    const wall = document.createElement('div');
    wall.classList.add('wall');
    wall.style.left = w.x + 'px';
    wall.style.top = w.y + 'px';
    wall.style.width = w.width + 'px';
    wall.style.height = w.height + 'px';
    game.appendChild(wall);
  });

  // Posiciona player e saída
  function updatePositions() {
    player.style.left = playerPos.x + 'px';
    player.style.top = playerPos.y + 'px';

    exit.style.left = exitPos.x + 'px';
    exit.style.top = exitPos.y + 'px';
  }

  updatePositions();

  // Função para checar colisão entre player e paredes
  function isColliding(newX, newY) {
    const playerRect = {x: newX, y: newY, width: size, height: size};
    const walls = document.querySelectorAll('.wall');
    for(let wall of walls) {
      const rect = {
        x: parseInt(wall.style.left),
        y: parseInt(wall.style.top),
        width: parseInt(wall.style.width),
        height: parseInt(wall.style.height),
      };
      if(rectanglesOverlap(playerRect, rect)) {
        return true;
      }
    }
    return false;
  }

  // Checa se dois retângulos se sobrepõem
  function rectanglesOverlap(r1, r2) {
    return !(r2.x >= r1.x + r1.width || 
             r2.x + r2.width <= r1.x || 
             r2.y >= r1.y + r1.height ||
             r2.y + r2.height <= r1.y);
  }

  // Movimento do jogador
  window.addEventListener('keydown', e => {
    if(message.style.display === 'block') return; // jogo acabado

    let newX = playerPos.x;
    let newY = playerPos.y;

    switch(e.key) {
      case 'ArrowUp': newY -= step; break;
      case 'ArrowDown': newY += step; break;
      case 'ArrowLeft': newX -= step; break;
      case 'ArrowRight': newX += step; break;
      default: return;
    }

    // Evita mover fora da área
    if(newX < 0 || newY < 0 || newX > 400 - size || newY > 400 - size) return;

    // Checa colisão
    if(!isColliding(newX, newY)) {
      playerPos.x = newX;
      playerPos.y = newY;
      updatePositions();
      checkWin();
    }
  });

  // Verifica vitória
  function checkWin() {
    if(playerPos.x === exitPos.x && playerPos.y === exitPos.y) {
      message.style.display = 'block';
    }
  }

  // Foco no game para capturar teclado
  game.focus();
</script>
</body>
</html>
