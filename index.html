<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jogos estilo Papa's Lego</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background: #f2f7fa;
    margin: 0;
    padding: 0;
    color: #333;
  }
  header {
    background: #e91e63;
    color: white;
    padding: 20px;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    letter-spacing: 3px;
  }
  nav {
    background: #03a9f4;
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 10px 0;
  }
  nav button {
    background: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 12px;
    font-size: 1.1em;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s;
  }
  nav button:hover, nav button.active {
    background: #ffeb3b;
    color: #222;
  }
  main {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 10px rgb(0 0 0 / 0.1);
  }
  .game-area {
    min-height: 400px;
  }
  /* Estilo jogo da mem√≥ria */
  .memory-grid {
    display: grid;
    grid-template-columns: repeat(4, 100px);
    grid-gap: 15px;
    justify-content: center;
  }
  .card {
    width: 100px;
    height: 100px;
    background: #03a9f4;
    border-radius: 15px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 50px;
    color: white;
    user-select: none;
    box-shadow: 0 4px 7px rgb(0 0 0 / 0.2);
    transition: transform 0.3s;
  }
  .card.flipped, .card.matched {
    background: #ffeb3b;
    color: #222;
    cursor: default;
    transform: rotateY(180deg);
  }
  /* Estilo jogo de montar pe√ßas */
  .lego-pieces {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
  }
  .lego-piece {
    width: 80px;
    height: 80px;
    background-color: #e91e63;
    border-radius: 10px;
    cursor: grab;
    user-select: none;
    box-shadow: 0 4px 7px rgb(0 0 0 / 0.2);
    position: relative;
  }
  .lego-piece.blue { background-color: #2196f3; }
  .lego-piece.yellow { background-color: #ffeb3b; }
  .lego-piece.green { background-color: #4caf50; }
  .lego-piece:active {
    cursor: grabbing;
  }
  .lego-board {
    width: 350px;
    height: 200px;
    border: 3px dashed #666;
    margin: 0 auto;
    border-radius: 15px;
    position: relative;
  }
  /* Estilo jogo encaixar blocos */
  .block-area {
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  .block, .slot {
    width: 100px;
    height: 100px;
    border-radius: 12px;
    box-shadow: 0 4px 7px rgb(0 0 0 / 0.2);
  }
  .block {
    background-color: #ff5722;
    cursor: grab;
  }
  .block.green { background-color: #4caf50; }
  .block.blue { background-color: #2196f3; }
  .block.yellow { background-color: #ffeb3b; color: #222; }
  .slot {
    border: 3px dashed #999;
  }
</style>
</head>
<body>
<header>Jogos estilo Papa's Lego</header>
<nav>
  <button id="btn-memory" class="active">Jogo da Mem√≥ria</button>
  <button id="btn-montar">Montar Pe√ßas</button>
  <button id="btn-encaixar">Encaixar Blocos</button>
</nav>
<main>
  <div id="game" class="game-area"></div>
</main>

<script>
  const gameArea = document.getElementById('game');
  const btnMemory = document.getElementById('btn-memory');
  const btnMontar = document.getElementById('btn-montar');
  const btnEncaixar = document.getElementById('btn-encaixar');

  function setActiveButton(activeBtn) {
    [btnMemory, btnMontar, btnEncaixar].forEach(btn => {
      btn.classList.toggle('active', btn === activeBtn);
    });
  }

  // ----------------- Jogo da Mem√≥ria -----------------
  function memoryGame() {
    gameArea.innerHTML = '';
    setActiveButton(btnMemory);

    const emojis = ['üü¶','üü•','üü©','üü®','üü™','üüß','üü´','‚¨õ'];
    let cards = emojis.concat(emojis); // 16 cartas
    cards = cards.sort(() => Math.random() - 0.5);

    const grid = document.createElement('div');
    grid.className = 'memory-grid';
    gameArea.appendChild(grid);

    let firstCard = null;
    let lockBoard = false;
    let matches = 0;

    cards.forEach((emoji, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.emoji = emoji;
      card.dataset.index = i;
      card.textContent = '';
      card.addEventListener('click', () => {
        if(lockBoard || card.classList.contains('flipped') || card.classList.contains('matched')) return;

        card.classList.add('flipped');
        card.textContent = emoji;

        if(!firstCard) {
          firstCard = card;
          return;
        }

        if(firstCard.dataset.emoji === card.dataset.emoji) {
          firstCard.classList.add('matched');
          card.classList.add('matched');
          matches += 1;
          firstCard = null;
          if(matches === emojis.length) {
            setTimeout(() => alert('Parab√©ns! Voc√™ completou o jogo da mem√≥ria!'), 300);
          }
        } else {
          lockBoard = true;
          setTimeout(() => {
            firstCard.classList.remove('flipped');
            firstCard.textContent = '';
            card.classList.remove('flipped');
            card.textContent = '';
            firstCard = null;
            lockBoard = false;
          }, 1000);
        }
      });
      grid.appendChild(card);
    });
  }

  // ----------------- Jogo Montar Pe√ßas -----------------
  function montarPecasGame() {
    gameArea.innerHTML = '';
    setActiveButton(btnMontar);

    const instructions = document.createElement('p');
    instructions.textContent = 'Arraste as pe√ßas coloridas para dentro da √°rea pontilhada!';
    instructions.style.textAlign = 'center';
    instructions.style.fontWeight = 'bold';
    instructions.style.marginBottom = '20px';
    gameArea.appendChild(instructions);

    const pieces = document.createElement('div');
    pieces.className = 'lego-pieces';
    gameArea.appendChild(pieces);

    const colors = ['red', 'blue', 'yellow', 'green'];
    colors.forEach(color => {
      const piece = document.createElement('div');
      piece.className = 'lego-piece ' + (color === 'red' ? '': color);
      piece.draggable = true;
      piece.style.backgroundColor = color === 'red' ? '#e91e63' : color;
      piece.addEventListener('dragstart', dragStart);
      pieces.appendChild(piece);
    });

    const board = document.createElement('div');
    board.className = 'lego-board';
    board.addEventListener('dragover', dragOver);
    board.addEventListener('drop', dropPiece);
    gameArea.appendChild(board);

    function dragStart(e) {
      e.dataTransfer.setData('text/plain', e.target.style.backgroundColor);
    }
    function dragOver(e) {
      e.preventDefault();
    }
    function dropPiece(e) {
      e.preventDefault();
      const color = e.dataTransfer.getData('text/plain');
      const piece = document.createElement('div');
      piece.className = 'lego-piece';
      piece.style.backgroundColor = color;
      piece.style.position = 'absolute';

      // Posiciona onde o usu√°rio soltou a pe√ßa (dentro do board)
      const rect = e.currentTarget.getBoundingClientRect();
      const x = e.clientX - rect.left - 40; // centro da pe√ßa
      const y = e.clientY - rect.top - 40;
      piece.style.left = x + 'px';
      piece.style.top = y + 'px';

      // Permitir arrastar as pe√ßas j√° no tabuleiro
      piece.draggable = true;
      piece.addEventListener('dragstart', dragStartExisting);

      e.currentTarget.appendChild(piece);
    }
    function dragStartExisting(e) {
      const style = window.getComputedStyle(e.target);
      e.dataTransfer.setData('text/plain', style.backgroundColor);
      const rect = e.target.getBoundingClientRect();
      e.dataTransfer.setData('offsetX', e.clientX - rect.left);
      e.dataTransfer.setData('offsetY', e.clientY - rect.top);
      e.dataTransfer.setDragImage(new Image(), 0, 0);
      e.target.style.opacity = '0.5';
    }

    board.addEventListener('dragend', e => {
      e.target.style.opacity = '1';
    });
  }

  // ----------------- Jogo Encaixar Blocos -----------------
  function encaixarBlocosGame() {
    gameArea.innerHTML = '';
    setActiveButton(btnEncaixar);

    const instructions = document.createElement('p');
    instructions.textContent = 'Arraste os blocos para os slots correspondentes!';
    instructions.style.textAlign = 'center';
    instructions.style.fontWeight = 'bold';
    instructions.style.marginBottom = '20px';
    gameArea.appendChild(instructions);

    const blockArea = document.createElement('div');
    blockArea.className = 'block-area';
    gameArea.appendChild(blockArea);

    // Slots
    const slotColors = ['#4caf50', '#2196f3', '#ffeb3b'];
    const slots = [];
    slotColors.forEach(color => {
      const slot = document.createElement('div');
      slot.className = 'slot';
      slot.style.backgroundColor = '#eee';
      slot.dataset.color = color;
      slot.addEventListener('dragover', dragOver);
      slot.addEventListener('drop', dropBlock);
      blockArea.appendChild(slot);
      slots.push(slot);
    });

    // Blocos
    const blocks = [
      {color: 'green', hex:'#4caf50'},
      {color: 'blue', hex:'#2196f3'},
      {color: 'yellow', hex:'#ffeb3b'}
    ];

    blocks.forEach(b => {
      const block = document.createElement('div');
      block.className = 'block ' + b.color;
      block.draggable = true;
      block.dataset.color = b.hex;
      block.textContent = '';
      block.addEventListener('dragstart', dragStartBlock);
      gameArea.appendChild(block);
    });

    function dragStartBlock(e) {
      e.dataTransfer.setData('color', e.target.dataset.color);
      e.dataTransfer.setData('id', e.target.className + Date.now());
      e.target.style.opacity = '0.5';
    }
    function dragOver(e) {
      e.preventDefault();
    }
    function dropBlock(e) {
      e.preventDefault();
      const color = e.dataTransfer.getData('color');
      const blockColor = e.currentTarget.dataset.color;

      if(color === blockColor) {
        e.currentTarget.style.backgroundColor = color;
        e.currentTarget.textContent = '‚úî';
        e.currentTarget.style.color = '#222';
        checkWin();
      } else {
        alert('Bloco errado! Tente novamente.');
      }
      // Voltar a opacidade do bloco
      const blocks = document.querySelectorAll('.block');
      blocks.forEach(b => b.style.opacity = '1');
    }

    function checkWin() {
      const allCorrect = slots.every(s => s.textContent === '‚úî');
      if(allCorrect) {
        setTimeout(() => alert('Parab√©ns! Voc√™ encaixou todos os blocos!'), 200);
      }
    }
  }

  // Iniciar com jogo da mem√≥ria
  memoryGame();

  // Bot√µes para trocar de jogo
  btnMemory.addEventListener('click', memoryGame);
  btnMontar.addEventListener('click', montarPecasGame);
  btnEncaixar.addEventListener('click', encaixarBlocosGame);
</script>
</body>
</html>
